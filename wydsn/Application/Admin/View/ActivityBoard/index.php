<!DOCTYPE html>
<!-- saved from url=(0044)http://app.immmmmm.com/taoke_show_kanban.php -->
<html lang="en" style="font-size: 12.8px;">

<head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta http-equiv="X-UA-Compatible" content="ie=edge">
	<title>618理想生活狂欢季</title>
	<link rel="stylesheet" href="/Public/618/index.css">
	<link rel="stylesheet" href="/Public/618/icomoon.css">
	<style>
		.zhuanlian {
			margin-right: 0;
		}

		.zhuanlian .item {
			text-align: left;
			width: 50%
		}

		.top_user .icon-up {
			font-size: 10px;
			display: inline-block;
			transform: scale(.8);
			font-size: .583rem !important;
			color: #dc3c33;
			text-decoration: none;
		}

		.tipaaa{
			width:100%;
			font-size: .5rem !important;
			color: #fff;
			text-decoration: none;
			text-align: center;
			padding: 0 0 10px;
		}
		.tipLogo{
			width:100%;
			position: absolute;
			top: 0;
			font-size: 1.5rem !important;
			color: #06a9ed;
			text-decoration: none;
			text-align: center;
			padding: 1.8rem 0 0;
		}
	</style>
</head>

<body style="position: relative;">
	<div class="viewport">

		
		<div class="column">

			<div class="overview panel">
				<div class="inner">
					<div class="item">
						<h4 id="total_users">244</h4>
						<span>
							<i class="icon-dot" style="color: #006cff"></i>
							注册用户
						</span>
					</div>
					<div class="item">
						<h4 id="total_agents">85</h4>
						<span>
							<i class="icon-dot" style="color: #6acca3"></i>
							VIP用户
						</span>
					</div>
					<div class="item">
						<h4 id="total_issue">46</h4>
						<span>
							<i class="icon-dot" style="color: #6acca3"></i>
							出单用户
						</span>
					</div>
					<div class="item">
						<h4 id="effective">54.12%</h4>
						<span>
							<i class="icon-dot" style="color: #ed3f35"></i>
							有效比例
						</span>
					</div>
				</div>
			</div>

			<div class="monitor panel">
				<div class="inner">
					<div class="tabs">
						<a href="javascript:;" data-index="0" class="active">实时订单</a>
						<!-- <a href="javascript:;" data-index="1">今日最爱买</a>
						<a href="javascript:;" data-index="2">超级红包榜</a> -->
					</div>
					<div class="content" style="display: block;">
						<div class="head">
							<span class="col">下单时间</span>
							<span class="col">商品名称</span>
							<span class="col">成交额</span>
						</div>
						<div class="marquee-view">

							<div class="marquee" id="marquee"></div>
						</div>
					</div>

					<div class="content">
						<div class="head">
							<span class="col">成交单数</span>
							<span class="col">商品名称</span>
							<span class="col">成交额</span>
						</div>
						<div class="marquee-view">
							<div class="marquee" id="marquee_top">

							</div>
						</div>
					</div>

					<div class="content">
						<div class="head">
							<span class="col">累积个数</span>
							<span class="col">渠道RID</span>
						</div>
						<div class="marquee-view">
							<div class="marquee" id="chaohong_top"></div>
						</div>
					</div>

				</div>
			</div>

			<div class="point panel">
				<div class="inner">
					<h3>CPS联盟渠道分布</h3>
					<div class="chart">
						<div class="pie" _echarts_instance_="ec_1591870211742"
							style="-webkit-tap-highlight-color: transparent; user-select: none; position: relative;">
							<div
								style="position: relative; overflow: hidden; width: 312px; height: 240px; padding: 0px; margin: 0px; border-width: 0px;">
								<canvas data-zr-dom-id="zr_0" width="312" height="240"
									style="position: absolute; left: 0px; top: 0px; width: 312px; height: 240px; user-select: none; -webkit-tap-highlight-color: rgba(0, 0, 0, 0); padding: 0px; margin: 0px; border-width: 0px;"></canvas>
							</div>
							<div></div>
						</div>
						<div class="data">
							<div class="item">
								<h4 class="order_all_zong">43</h4>
								<span>
									<i class="icon-dot" style="color: #ed3f35"></i>
									订单总量
								</span>
							</div>
							<div class="item">
								<h4 class="order_all_commission">76.67</h4>
								<span>
									<i class="icon-dot" style="color: #eacf19"></i>
									佣金总额
								</span>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
		<div class="column">

			<div class="map">
				<h3>
					<span class="icon-cube"></span>
					618理想生活狂欢季，5月25 - 6月20
				</h3>
				<div class="chart">
					<!--<iframe height=498 width="100%" src='' frameborder=0 'allowfullscreen'></iframe>-->
					<div class="geo" _echarts_instance_="ec_1591870211741"
						style="-webkit-tap-highlight-color: transparent; user-select: none; position: relative;">
						<div
							style="position: relative; overflow: hidden; width: 730px; height: 527px; padding: 0px; margin: 0px; border-width: 0px; cursor: default;">
							<canvas data-zr-dom-id="zr_0" width="730" height="527"
								style="position: absolute; left: 0px; top: 0px; width: 730px; height: 527px; user-select: none; -webkit-tap-highlight-color: rgba(0, 0, 0, 0); padding: 0px; margin: 0px; border-width: 0px;"></canvas><canvas
								data-zr-dom-id="zr_1" width="730" height="527"
								style="position: absolute; left: 0px; top: 0px; width: 730px; height: 527px; user-select: none; -webkit-tap-highlight-color: rgba(0, 0, 0, 0); padding: 0px; margin: 0px; border-width: 0px;"></canvas><canvas
								data-zr-dom-id="zr_2" width="730" height="527"
								style="position: absolute; left: 0px; top: 0px; width: 730px; height: 527px; user-select: none; -webkit-tap-highlight-color: rgba(0, 0, 0, 0); padding: 0px; margin: 0px; border-width: 0px;"></canvas>
						</div>
						<div
							style="position: absolute; display: none; border-style: solid; white-space: nowrap; z-index: 9999999; transition: left 0.4s cubic-bezier(0.23, 1, 0.32, 1) 0s, top 0.4s cubic-bezier(0.23, 1, 0.32, 1) 0s; background-color: rgba(50, 50, 50, 0.7); border-width: 0px; border-color: rgb(51, 51, 51); border-radius: 4px; color: rgb(255, 255, 255); font: 14px / 21px sans-serif; padding: 5px; left: 253px; top: 191px; pointer-events: none;">
							杭州 Top10</div>
					</div>
				</div>
			</div>

			<div class="users panel">
				<div class="inner">
					<h3>订单数据统计</h3>
					<div class="chart">
						<div class="bar" _echarts_instance_="ec_1591870211743"
							style="-webkit-tap-highlight-color: transparent; user-select: none; position: relative;">
							<div
								style="position: relative; overflow: hidden; width: 505px; height: 240px; padding: 0px; margin: 0px; border-width: 0px; cursor: default;">
								<canvas data-zr-dom-id="zr_0" width="505" height="240"
									style="position: absolute; left: 0px; top: 0px; width: 505px; height: 240px; user-select: none; -webkit-tap-highlight-color: rgba(0, 0, 0, 0); padding: 0px; margin: 0px; border-width: 0px;"></canvas>
							</div>
							<div></div>
						</div>
						<div class="data">
							<div class="item">
								<h4 class="order_all_zong">43</h4>
								<span>
									<i class="icon-dot" style="color: #ed3f35"></i>
									订单总量
								</span>
							</div>
							<div class="item">
								<h4 class="order_all_commission">76.67</h4>
								<span>
									<i class="icon-dot" style="color: #eacf19"></i>
									佣金总额
								</span>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
		<div class="column">

			<div class="order panel">
				<div class="inner">

					<div class="filter">
						<a href="javascript:;" data-key="order_all" class="">全部</a>
						<a href="javascript:;" data-key="order_ali" class="active">淘宝</a>
						<a href="javascript:;" data-key="order_tm" class="">天猫</a>
						<a href="javascript:;" data-key="order_jd" class="">京东</a>
						<a href="javascript:;" data-key="order_pdd" class="">拼多多</a>
						<a href="javascript:;" data-key="order_vip" class="">唯品会</a>
					</div>

					<div class="data">
						<div class="item">
							<h4 id="order_all_number">42</h4>
							<span>
								<i class="icon-dot" style="color: #ed3f35;"></i>
								订单量
							</span>
						</div>
						<div class="item">
							<h4 id="order_all_gmv">1951.43</h4>
							<span>
								<i class="icon-dot" style="color: #eacf19;"></i>
								销售额(GMV)
							</span>
						</div>
					</div>
				</div>
			</div>

			<div class="sales panel">
				<div class="inner">
					<div class="caption">
						<h3>销售额统计</h3>
						<!--<a href="javascript:;" class="active" data-type="year">618期间</a>
<a href="javascript:;" data-type="quarter">季</a>-->
					</div>
					<div class="chart">
						<div class="label">单位:元</div>
						<div class="line" _echarts_instance_="ec_1591870211744"
							style="-webkit-tap-highlight-color: transparent; user-select: none; position: relative;">
							<div
								style="position: relative; overflow: hidden; width: 476px; height: 168px; padding: 0px; margin: 0px; border-width: 0px; cursor: default;">
								<canvas data-zr-dom-id="zr_0" width="476" height="168"
									style="position: absolute; left: 0px; top: 0px; width: 476px; height: 168px; user-select: none; -webkit-tap-highlight-color: rgba(0, 0, 0, 0); padding: 0px; margin: 0px; border-width: 0px;"></canvas>
							</div>
							<div
								style="position: absolute; display: none; border-style: solid; white-space: nowrap; z-index: 9999999; transition: left 0.4s cubic-bezier(0.23, 1, 0.32, 1) 0s, top 0.4s cubic-bezier(0.23, 1, 0.32, 1) 0s; background-color: rgba(50, 50, 50, 0.7); border-width: 0px; border-color: rgb(51, 51, 51); border-radius: 4px; color: rgb(255, 255, 255); font: 14px / 21px sans-serif; padding: 5px; left: 65px; top: 9px; pointer-events: none;">
								05-25<br><span
									style="display:inline-block;margin-right:5px;border-radius:10px;width:10px;height:10px;background-color:#00f2f1;"></span>销售额GMV:
								19.9<br><span
									style="display:inline-block;margin-right:5px;border-radius:10px;width:10px;height:10px;background-color:#ed3f35;"></span>预估佣金:
								0.7</div>
						</div>
					</div>
				</div>
			</div>

			<div class="wrap">
				<div class="channel panel zhuanlian">
					<div class="inner">
						<h3>用户分布</h3>
						<div class="data">
							<div class="item" id='province0'>
								<h4 id="total_lq">119<b style="font-size:12px;font-weight:500;margin-left:6px">(次)</b>
								</h4>
								<span>
									<i class="icon-plane"></i>
									领券转链
								</span>
							</div>
							<div class="item" id='province1'>
								<h4 id="total_hd">17<b style="font-size:12px;font-weight:500;margin-left:6px">(次)</b>
								</h4>
								<span>
									<i class="icon-plane"></i>
									活动转链
								</span>
							</div>
						</div>
						<div class="data">
							<div class="item" id='province2'>
								<h4 id="total_share">15<b style="font-size:12px;font-weight:500;margin-left:6px">(次)</b>
								</h4>
								<span>
									<i class="icon-bag"></i>
									分享转链
								</span>
							</div>
							<div class="item" id='province3'> 
								<h4 id="total_old">38<b style="font-size:12px;font-weight:500;margin-left:6px">(次)</b>
								</h4>
								<span>
									<i class="icon-bag"></i>
									低版本转链
								</span>
							</div>
						</div>
					</div>
				</div>
			</div>

			<div class="top panel">
				<div class="inner top_user">
					<div class="all" style="width:50%">
						<h3>出单用户榜<b style="font-size:12px;font-weight:500;margin-left:6px"></b></h3>
						<ul>
							<li>
								<i class="icon-cup1" style="color:#FFD700;"></i>
								<span id="chudan_top1">2E3463FE8<span style="float: right;margin-top: 8px;">16单<s
											class="icon-up"></s></span></span>
							</li>
							<li>
								<i class="icon-cup2" style="color: #e6e8fa"></i>
								<span id="chudan_top2">68F7B9EE3<span style="float: right;margin-top: 8px;">10单<s
											class="icon-up"></s></span></span>
							</li>
							<li>
								<i class="icon-cup3" style="color: #B87333;"></i>
								<span id="chudan_top3">ED8A288C1<span style="float: right;margin-top: 8px;">5单<s
											class="icon-up"></s></span></span>
							</li>
						</ul>
					</div>
					<div class="province">
						<h3>各省统计 <i class="date">// 订单数 //</i></h3>
						<div class="data">
							<ul class="sup" id="sup">
								<!-- <li><span>福建省</span><span>96次<s class="icon-up"></s></span></li>
								<li><span>广东省</span><span>26次<s class="icon-up"></s></span></li>
								<li><span>重庆市</span><span>2次<s class="icon-up"></s></span></li>
								<li><span>河南省</span><span>2次<s class="icon-up"></s></span></li>
								<li><span>北京市</span><span>1次<s class="icon-up"></s></span></li> -->
							</ul>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
	<div class="tipaaa">来鹿提供技术支持</div>
	<div class="tipLogo"><?php echo WEB_TITLE;?>智能看板</div>

	<script src="/Public/618/jquery-1.10.2.js"></script>
	<script src="/Public/618/jquery.min.js"></script>
	<script src="/Public/618/echarts-4.2.1.min.js"></script>
	<script src="/Public/618/echarts.min.js"></script>
	<script>

	</script>
	<script src="/Public/618/china.js"></script>
	<script>
		(function () {
			var setFont = function () {
				var html = document.documentElement;
				var width = html.clientWidth;
				if (width < 1024) width = 1024
				if (width > 1920) width = 1920
				var fontSize = width / 80 + 'px';
				html.style.fontSize = fontSize;
			}
			setFont();
			window.onresize = function () {
				setFont();
			}
		})();

		(function () {
			$('.monitor').on('click', ' a',
				function () {
					$(this).addClass('active').siblings().removeClass('active');
					var index = $(this).index();
					$('.content').eq(index).show().siblings('.content').hide();
				});
			$('.monitor .marquee').each(function (index, dom) {
				var rows = $(dom).children().clone();
				$(dom).append(rows);
			});
		})();


		//初始化订单监控
		var order_all_data = {
			order_all: {
				orders: 0,
				amount: 0
			},
			order_ali: {
				orders: 0,
				amount: 0
			},
			order_jd: {
				orders: 0,
				amount: 0
			},
			order_pdd: {
				orders: 0,
				amount: 0
			},
			order_vip: {
				orders: 0,
				amount: 0
			},
			order_tm: {
				orders: 0,
				amount: 0
			}
		}

		var left_middle=[];
		var  maxLen=left_middle.length;


		$('.order').on('click', '.filter a',
			function () {
				$(this).addClass('active').siblings().removeClass('active');
				var key = $(this).attr('data-key');
				key = order_all_data[key];
				$('.order .item h4:eq(0)').text(key.orders);
				$('.order .item h4:eq(1)').text(key.amount);
			});
		var index = 0;
		var aclick = $('.order a');
		setInterval(function () {
				index++;
				if (index > 5) {
					index = 0;
				}
				aclick.eq(index).click();
			},
			3000);

		function timestampToTime(timestamp) {
			var date = new Date(timestamp); //时间戳为10位需*1000，时间戳为13位的话不需乘1000
			var Y = date.getFullYear() + "-";
			var M = (date.getMonth() + 1 < 10 ? "0" + (date.getMonth() + 1) : date.getMonth() + 1) + "-";
			var D = date.getDate() + " ";
			var h = date.getHours() + ":";
			var m = date.getMinutes();
			return M + D + h + m;
		}

		var jishu = 1;
		time_user_refresh();

		setInterval(function () {
			location.reload();
		}, 1800000);

		setInterval(time_user_refresh, 60000 * 5);

		function time_user_refresh() {
			$.ajax({
				type: "POST",
				dataType: "json",
				url: "/taokeyun.php?c=ActivityBoard&a=activity",
				success: function (res) {
					var data=res.data;

					console.log(data);
					
					if (data && data.left_top) {
						// $('#effective').text(data.left_top.user_num);
						// $('#total_agents').text(data.left_top.user_vip_num);
						// $('#total_issue').text(data.left_top.user_buy_num);
						// $(total_users).text(data.left_top.user_buy_proportion+"%");

						$('#effective').text(data.left_top.user_buy_proportion+"%");
						$('#total_agents').text(data.left_top.user_vip_num);
						$('#total_issue').text(data.left_top.user_buy_num);
						$(total_users).text(data.left_top.user_num);
					}

					

					if (data && data.left_middle) {
						var html = '';
						left_middle=data.left_middle;
						maxLen=left_middle.length;
						for (var i = 0; i < data.left_middle.length; i++) {
							var link = '';
							var type_name = '';
							if (data.left_middle[i]['type'] == 1) {
								type_name = '【淘宝】';
								link = 'onclick="window.open(\'https://item.taobao.com/item.htm?id=' + data
									.left_middle[i]['goods_id'] + '\')"';
							}
							if (data.left_middle[i]['type'] == 2) {
								type_name = '【京东】';
								link = 'onclick="window.open(\'https://item.jd.com/' + data.left_middle[i][
									'D'
								] + '.html\')"';
							}
							if (data.left_middle[i]['type'] == 3) {
								type_name = '【拼多多】';
								link =
									'onclick="window.open(\'https://mobile.yangkeduo.com/goods.html?goods_id=' +
									data.left_middle[i]['goods_id'] + '\')"';
							}

							if (data.left_middle[i]['type'] == 4) {
								type_name = '【拼多多】';
								link =
									'onclick="window.open(\'https://detail.vip.com/detail-10004116-' +
									data.left_middle[i]['goods_id'] + '.html\')"';
							}
							if (data.left_middle[i]['type'] == 5) {
								type_name = '【天猫】';
								link =
									'onclick="window.open(\'https://detail.tmall.com/item.htm?id=' +
									data.left_middle[i]['goods_id'] + '\')"';
							}
							html = html + '<div class="row" ' + link + '><span class="col">' + timestampToTime(
									data.left_middle[i]['create_time']) + '</span><span class="col">' + type_name + data
								.left_middle[i]['goods_title']+ '</span><span class="col">￥' + parseFloat(
									data.left_middle[i]['pay_price']).toFixed(2) + '</span><span class="icon-dot"></span></div>';
						}
						$('#marquee').html(html);
					}


					
					var orders_form=[];
					if (data && data.order_statistical) {
						if (data.order_statistical.all) {
							order_all_data.order_all.orders = parseFloat(data.order_statistical['all'].num).toFixed(0);
							order_all_data.order_all.amount = parseFloat(data.order_statistical['all'].money).toFixed(2);
							$('.order_all_zong').text(parseFloat(data.order_statistical['all'].num).toFixed(0));
							$('.order_all_commission').text(parseFloat(data.order_statistical['all'].amount).toFixed(2));
						}
						if (data.order_statistical.tb) {
							let order=parseFloat(data.order_statistical['tb'].num).toFixed(0);
							order_all_data.order_ali.orders = order;
							order_all_data.order_ali.amount = parseFloat(data.order_statistical['tb'].money).toFixed(2);
							orders_form.push({
								name:'淘宝',
								value:order
							})
						}
						if (data.order_statistical.jd) {
							let order=parseFloat(data.order_statistical['jd'].num).toFixed(0);
							order_all_data.order_jd.orders = order;
							order_all_data.order_jd.amount = parseFloat(data.order_statistical['jd'].money).toFixed(2);
							orders_form.push({
								name:'京东',
								value:order
							})
						}
						if (data.order_statistical.pdd) {
							let order=parseFloat(data.order_statistical['pdd'].num).toFixed(0);
							order_all_data.order_pdd.orders = order;
							order_all_data.order_pdd.amount = parseFloat(data.order_statistical['pdd'].money).toFixed(2);
							orders_form.push({
								name:'拼多多',
								value:order
							})
						}
						if (data.order_statistical.vip) {
							let order=parseFloat(data.order_statistical['vip'].num).toFixed(0);
							order_all_data.order_vip.orders = order;
							order_all_data.order_vip.amount = parseFloat(data.order_statistical['vip'].money).toFixed(2);
							orders_form.push({
								name:'唯品会',
								value:order
							})
						}
						if (data.order_statistical.tm) {
							let order=parseFloat(data.order_statistical['tm'].num).toFixed(0);
							order_all_data.order_tm.orders = order;
							order_all_data.order_tm.amount = parseFloat(data.order_statistical['tm'].money).toFixed(2);
							orders_form.push({
								name:'天猫',
								value:order
							})
						}

						var myechart = echarts.init($('.pie')[0]);
						option = {
							tooltip: {
								trigger: 'item',
								formatter: "{a} <br/>{b} : {c} ({d}%)"
							},
							series: [{
								name: 'CPS联盟',
								type: 'pie',
								radius: ['10%', '70%'],
								center: ['50%', '50%'],
								roseType: 'radius',
								data: orders_form,
								label: {
									fontSize: 10
								},
								labelLine: {
									length: 8,
									length2: 10
								}
							}],
							color: ['#006cff', '#60cda0', '#ed8884', '#ff9f7f', '#0096ff', '#9fe6b8',
								'#32c5e9', '#1d9dff'
							]
						};
						myechart.setOption(option);



					}


					
					if (data && data.province_num) {
						for (var i = 0; i < data.province_num.length; i++) {
							$('#province'+i).html(`<h4 id="total_old">${data.province_num[i].num}<b style="font-size:12px;font-weight:500;margin-left:6px">(人)</b></h4><span><i class="icon-bag"></i>${data.province_num[i].phone_province}</span>`);
						}
					}
					
					
					if (data && data.user_order_num_new) {
						
						if (data.user_order_num_new[0]) {
							$('#chudan_top1').html(data.user_order_num_new[0].phone +
								'<span style="float: right;margin-top: 8px;">' + data.user_order_num_new[0].num + '单<s class="icon-up"></s></span>');
						}
						if (data.user_order_num_new[1]) {
							$('#chudan_top2').html(data.user_order_num_new[1].phone +
								'<span style="float: right;margin-top: 8px;">' + data.user_order_num_new[1].num + '单<s class="icon-up"></s></span>');
						}
						if (data.user_order_num_new[2]) {
							$('#chudan_top3').html(data.user_order_num_new[2].phone +
								'<span style="float: right;margin-top: 8px;">' + data.user_order_num_new[2].num + '单<s class="icon-up"></s></span>');
						}
					}

					if (data && data.orders_form && jishu == 1) {
						var option = {
							tooltip: {
								trigger: 'axis'
							},
							xAxis: [{
								type: 'category',
								data: data.orders_form.title,
								axisTick: {
									alignWithLabel: false,
									show: false
								},
								axisLabel: {
									color: '#4c9bfd'
								}
							}],
							yAxis: [{
								type: 'value',
								axisTick: {
									alignWithLabel: false,
									show: false
								},
								axisLabel: {
									color: '#4c9bfd'
								},
								splitLine: {
									lineStyle: {
										color: 'rgba(0, 240, 255, 0.3)'
									}
								},
							}],
							legend: {
								textStyle: {
									color: '#4c9bfd'
								},
								right: '10%'
							},
							grid: {
								show: true,
								top: '20%',
								left: '3%',
								right: '4%',
								bottom: '3%',
								borderColor: '#012f4a',
								containLabel: true
							},
							series: [{
									name: '销售额GMV',
									data: data.orders_form.gmv,
									type: 'line',
									smooth: true,
									itemStyle: {
										color: '#00f2f1'
									}
								},
								{
									name: '预估佣金',
									data: data.orders_form.commission,
									type: 'line',
									smooth: true,
									itemStyle: {
										color: '#ed3f35'
									}
								}
							]
						};
						var myechart = echarts.init($('.line')[0]);
						myechart.setOption(option);
						// var data = {
						// 	year: [data.orders_form.gmv],
						// 	quarter: [data.orders_form.commission]
						// }
					}
					jishu = jishu + 1;
				}
			})
			$.ajax({
				type: "POST",
				dataType: "json",
				url: "/taokeyun.php?c=ActivityBoard&a=provinceOrderNum",
				success: function (res) {
					let data=res.data;
					if (data && data.province_user_order_num) {
						var html = '';
						for (var i = 0; i < data.province_user_order_num.length; i++) {
							if(i<5){
								html = html + '<li><span>' + data.province_user_order_num[i]['province'] +
								'</span><span>' + data.province_user_order_num[i]['order_num'] +
								'单<s class="icon-up"></s></span></li>';
							}
						}
						$('#sup').html(html);
					}
				}})

				$.ajax({
    type: "POST",
    dataType: "json",
    url: "/taokeyun.php?c=ActivityBoard&a=provinceOrderNum",
    success: function (res) {
        let data=res.data;
        if (data && data.province_user_order_num) {
            var html = '';
            for (var i = 0; i < data.province_user_order_num.length; i++) {
                if(i<5){
                    html = html + '<li><span>' + data.province_user_order_num[i]['province'] +
                    '</span><span>' + data.province_user_order_num[i]['order_num'] +
                    '单<s class="icon-up"></s></span></li>';
                }
            }
            $('#sup').html(html);
        }
    }})

    $.ajax({
        type: "POST",
        dataType: "json",
        url: "/taokeyun.php?c=ActivityBoard&a=orderStatistical",
        success: function (res) {
            let data=res.data;

            if (data && data.order_money_fifteen && data.order_amount_fifteen ) {
            var option = {
                tooltip: {
                    trigger: 'axis'
                },
                xAxis: [{
                    type: 'category',
                    data: data.order_fifteen_date,
                    axisTick: {
                        alignWithLabel: false,
                        show: false
                    },
                    axisLabel: {
                        color: '#4c9bfd'
                    }
                }],
                yAxis: [{
                    type: 'value',
                    axisTick: {
                        alignWithLabel: false,
                        show: false
                    },
                    axisLabel: {
                        color: '#4c9bfd'
                    },
                    splitLine: {
                        lineStyle: {
                            color: 'rgba(0, 240, 255, 0.3)'
                        }
                    },
                }],
                legend: {
                    textStyle: {
                        color: '#4c9bfd'
                    },
                    right: '10%'
                },
                grid: {
                    show: true,
                    top: '20%',
                    left: '3%',
                    right: '4%',
                    bottom: '3%',
                    borderColor: '#012f4a',
                    containLabel: true
                },
                series: [{
                        name: '销售额GMV',
                        data: data.order_money_fifteen,
                        type: 'line',
                        smooth: true,
                        itemStyle: {
                            color: '#00f2f1'
                        }
                    },
                    {
                        name: '预估佣金',
                        data: data.order_amount_fifteen,
                        type: 'line',
                        smooth: true,
                        itemStyle: {
                            color: '#ed3f35'
                        }
                    }
                ]
            };
            var myechart = echarts.init($('.line')[0]);
            myechart.setOption(option);
            // var datas = {
            // 	year: [data.orders_form.gmv],
            // 	quarter: [data.orders_form.commission]
            // }
        }
        if (data && data.order_num_fifteen ) {
            
            var item = {
                name: '',
                value: 1200,
                itemStyle: {
                    color: '#254065'
                },
                emphasis: {
                    itemStyle: {
                        color: '#254065'
                    }
                },
                tooltip: {
                    extraCssText: 'opacity:0'
                }
            };
            option = {
                tooltip: {
                    trigger: 'item',
                    axisPointer: {
                        type: 'shadow'
                    }
                },
                grid: {
                    left: '0',
                    right: '3%',
                    bottom: '3%',
                    top: '5%',
                    containLabel: true,
                    show: true,
                    borderColor: 'rgba(0, 240, 255, 0.3)'
                },
                xAxis: [{
                    type: 'category',
                    data: data.order_fifteen_date,
                    axisTick: {
                        alignWithLabel: false,
                        show: false
                    },
                    axisLabel: {
                        color: '#4c9bfd'
                    }
                }],
                yAxis: [{
                    type: 'value',
                    axisTick: {
                        alignWithLabel: false,
                        show: false
                    },
                    axisLabel: {
                        color: '#4c9bfd'
                    },
                    splitLine: {
                        lineStyle: {
                            color: 'rgba(0, 240, 255, 0.3)'
                        }
                    },
                }],
                series: [{
                    itemStyle: {
                        color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [{
                                offset: 0,
                                color: '#00fffb'
                            },
                            {
                                offset: 1,
                                color: '#0061ce'
                            }
                        ])
                    },
                    name: '订单统计',
                    type: 'bar',
                    barWidth: '60%',
                    data: data.order_num_fifteen
                }]
            };
            var myechart = echarts.init($('.users .bar')[0]);
            myechart.setOption(option);
        }
            
    }})

		}
	</script>
	<script>
		
		var option = null;
		var geoCoordMap = {
			'上海': [119.1803, 31.2891],
			"福建": [119.4543, 25.9222],
			"重庆": [108.384366, 30.439702],
			'北京': [116.4551, 40.2539],
			"辽宁": [123.1238, 42.1216],
			"河北": [114.4995, 38.1006],
			"天津": [117.4219, 39.4189],
			"山西": [112.3352, 37.9413],
			"陕西": [109.1162, 34.2004],
			"甘肃": [103.5901, 36.3043],
			"宁夏": [106.3586, 38.1775],
			"青海": [101.4038, 36.8207],
			"新疆": [87.9236, 43.5883],
			"西藏": [91.11, 29.97],
			"四川": [103.9526, 30.7617],
			"吉林": [125.8154, 44.2584],
			"山东": [117.1582, 36.8701],
			"河南": [113.4668, 34.6234],
			"江苏": [118.8062, 31.9208],
			"安徽": [117.29, 32.0581],
			"湖北": [114.3896, 30.6628],
			"浙江": [119.5313, 29.8773],
			'内蒙古': [110.3467, 41.4899],
			"江西": [116.0046, 28.6633],
			"湖南": [113.0823, 28.2568],
			"贵州": [106.6992, 26.7682],
			"云南": [102.9199, 25.4663],
			"广东": [113.12244, 23.009505],
			"广西": [108.479, 23.1152],
			"海南": [110.3893, 19.8516],
			'黑龙江': [127.9688, 45.368],
			'台湾': [121.4648, 25.5630]
		};
		var chinaDatas = [{
				name: '北京',
				value: 86
			},
			{
				name: '福建',
				value: 65
			},
			{
				name: '广东',
				value: 53
			},
			{
				name: '上海',
				value: 48
			},

			{
				name: '河北',
				value: 2
			},
			{
				name: '天津',
				value: 6
			},
			{
				name: '山西',
				value: 12
			},
			{
				name: '陕西',
				value: 2
			},
			{
				name: '甘肃',
				value: 4
			},
			{
				name: '宁夏',
				value: 5
			},
			{
				name: '青海',
				value: 3
			},
			{
				name: '新疆',
				value: 0.4
			},
			{
				name: '西藏',
				value: 0.3
			},
			{
				name: '四川',
				value: 22
			},
			{
				name: '重庆',
				value: 12
			},
			{
				name: '山东',
				value: 9
			},
			{
				name: '河南',
				value: 0.9
			},
			{
				name: '江苏',
				value: 24
			},
			{
				name: '安徽',
				value: 15
			},
			{
				name: '湖北',
				value: 6
			},
			{
				name: '浙江',
				value: 15
			},
			{
				name: '内蒙古',
				value: 0.3
			},
			{
				name: '江西',
				value: 34
			},
			{
				name: '湖南',
				value: 12
			},
			{
				name: '贵州',
				value: 0.8
			},
			{
				name: '广西',
				value: 16
			},
			{
				name: '海南',
				value: 37
			},
			{
				name: '辽宁',
				value: 0.2
			},
			{
				name: '吉林',
				value: 0.4
			},
			{
				name: '云南',
				value: 34
			},
			{
				name: '黑龙江',
				value: 5
			},
			{
				name: '台湾',
				value: 43
			}
		];
		var convertData = function (data, type) {
			/*type:1 地图参数；type:2数据参数*/
			var res = [];
			for (var i = 0; i < data.length; i++) {
				var geoCoord = geoCoordMap[data[i].name];
				if (geoCoord) {
					if (type == 2) {
						res.push({
							name: data[i].name,
							value: geoCoord.concat(data[i].value),
							username: data[i].username,
							telphone: data[i].telphone,
							address: data[i].address
						});
					} else {
						res.push({
							name: data[i].name,
							value: geoCoord.concat(data[i].value)
						});
					}
				}
			}
			//console.log(res);
			return res;
		};
		var yData = [];
		var barData = chinaDatas;
		barData = barData.sort(function (a, b) {
			return b.value - a.value;
		});
		for (var j = 0; j < barData.length; j++) {
			if (j < 10) {
				yData.push('0' + j + barData[j].name);
			} else {
				yData.push(j + barData[j].name);
			}
		}
		option = {
			backgroundColor: '#00013a',


			geo: {
				map: 'china',
				label: {
					show: true,
					color: '#ffffff',
					emphasis: {
						color: 'white',
						show: false
					}
				},
				roam: false, //是否允许缩放
				// top: 100,
				// left: 'left',
				// right: '300',
				zoom: 1.2, //默认显示级别
				scaleLimit: {
					min: 0,
					max: 3
				}, //缩放级别
				itemStyle: {
					normal: {
						borderColor: 'rgba(26,82,231, 1)',
						borderWidth: 1,
						areaColor: {
							type: 'radial',
							x: 0.5,
							y: 0.5,
							r: 0.8,
							colorStops: [{
								offset: 0,
								color: 'rgba(14, 101, 247, .1)' // 0% 处的颜色
							}, {
								offset: 1,
								color: 'rgba(125, 183, 252, .1)' // 100% 处的颜色
							}],
							globalCoord: false // 缺省为 false
						},
						shadowColor: 'rgba(255, 255, 255, 0)',
						shadowOffsetX: -2,
						shadowOffsetY: 2,
						shadowBlur: 10
					},
					emphasis: {
						areaColor: 'rgba(249,157,51, .)',
						borderWidth: 0
					}
				},
				//是否显示南海诸岛
				/*regions: [{
					name: "南海诸岛",
					value: 0,
					itemStyle: {
						normal: {
							opacity: 0,
							label: {
								show: false
							}
						}
					}
				}],*/
				tooltip: {
					show: false
				}
			},
			series: [{
					type: 'effectScatter',
					coordinateSystem: 'geo',
					z: 1,
					data: [],
					symbolSize: 14,
					label: {
						normal: {
							show: true,
							formatter: function (params) {
								return '{fline|用户：' + params.data.telphone + '  购买了' +
									'}\n{tline|' + params.data.address.substring(0,20) + '...}';
							},
							position: 'top',
							backgroundColor: 'rgba(254,174,33,.8)',
							padding: [0, 0],
							borderRadius: 3,
							lineHeight: 32,
							color: '#f7fafb',
							rich: {
								fline: {
									padding: [0, 10, 10, 10],
									color: '#ffffff'
								},
								tline: {
									padding: [10, 10, 0, 10],
									color: '#ffffff'
								}
							}
						},
						emphasis: {
							show: true
						}
					},
					itemStyle: {
						color: '#feae21',
					}
				},
				{
					type: 'effectScatter',
					coordinateSystem: 'geo',
					z: 1,
					data: [],
					symbolSize: 14,
					label: {
						normal: {
							show: true,
							formatter: function (params) {
								return '{fline|用户：' + params.data.telphone + '  购买了' +
									'}\n{tline|' + params.data.address.substring(0,20)+ '...}';
							},
							position: 'top',
							backgroundColor: 'rgba(233,63,66,.9)',
							padding: [0, 0],
							borderRadius: 3,
							lineHeight: 32,
							color: '#ffffff',
							rich: {
								fline: {
									padding: [0, 10, 10, 10],
									color: '#ffffff'
								},
								tline: {
									padding: [10, 10, 0, 10],
									color: '#ffffff'
								}
							}
						},
						emphasis: {
							show: true
						}
					},
					itemStyle: {
						color: '#e93f42',
					}
				},
				{
					type: 'effectScatter',
					coordinateSystem: 'geo',
					z: 1,
					data: [],
					symbolSize: 14,
					label: {
						normal: {
							show: true,
							formatter: function (params) {
								return '{fline|用户：' + params.data.telphone + '  购买了' +
									'}\n{tline|' + params.data.address.substring(0,20) + '...}';
							},
							position: 'top',
							backgroundColor: 'rgba(8,186,236,.9)',
							padding: [0, 0],
							borderRadius: 3,
							lineHeight: 32,
							color: '#ffffff',
							rich: {
								fline: {
									padding: [0, 10, 10, 10],
									color: '#ffffff'
								},
								tline: {
									padding: [10, 10, 0, 10],
									color: '#ffffff'
								}
							}
						},
						emphasis: {
							show: true
						}
					},
					itemStyle: {
						color: '#08baec',
					}
				},
				//地图
				{
					type: 'map',
					mapType: 'china',
					geoIndex: 0,
					z: 0,
					data: convertData([], 1)
				},
				
			]
		};
		var myecharts = echarts.init($('.map .geo')[0])
		myecharts.setOption(option)


		
		
		var runidx = 1;
		var ac_province=0;
		var timer = setInterval(() => {

			//数据情况重绘，清除formatter移动效果，也可根据自身需求是否需要，删除这两行代码
			/*option.series[seriesjson[runidx].createType-1].data = [];
			myChart.setOption(option, true);*/
			// var runidx = Math.floor(Math.random() * 3);
			runidx++;
			if(runidx>3){
				runidx=0;
			}
			ac_province++;
			if(ac_province>maxLen){
				ac_province=0
			}

			var typeidx = Math.floor(Math.random() * 3);
			var dataidx = Math.floor(Math.random() * 32);
			var ranval = Math.floor(Math.random() * 10);
			chinaDatas[dataidx].value = chinaDatas[dataidx].value + ranval;
			var valarr = geoCoordMap[left_middle[ac_province].province];
			
			valarr.push(ranval);
			
			option.series[runidx].data = [{
				name: '',
				username: left_middle[ac_province].user_phone,
				telphone: left_middle[ac_province].user_phone,
				address: left_middle[ac_province].goods_title,
				value: valarr
			}];

			console.log(option.series[runidx].data);
			
			myecharts.setOption(option, true);
		}, 3000);

		
	</script>
</body>

</html>